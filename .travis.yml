language: scala
scala:
  - 2.12.2
  
services:
  - docker

jdk:
  - oraclejdk8

script: sbt ++$TRAVIS_SCALA_VERSION assembly;

after_success:
  - if [ "$TRAVIS_BRANCH" == "testing" ]; then
    sbt receptor/docker:publishLocal;
    docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
    docker push "$DOCKER_HUB_ORG"/receptor:v"$DOCKER_TAG_VERSION"."$TRAVIS_BUILD_NUMBER";
    fi
